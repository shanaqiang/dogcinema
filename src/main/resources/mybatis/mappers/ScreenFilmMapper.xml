<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shana.cinema.mapper.ScreenFilmMapper">
  <resultMap id="BaseResultMap" type="com.shana.cinema.pojo.ScreenFilm">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    <id column="sfid" jdbcType="INTEGER" property="sfid" />
    <result column="fid" jdbcType="INTEGER" property="fid" />
    <result column="sid" jdbcType="INTEGER" property="sid" />
    <result column="price" jdbcType="DOUBLE" property="price" />
    <result column="nowprice" jdbcType="DOUBLE" property="nowprice" />
    <result column="showtime" property="showtime" />
    <result column="endtime" property="endtime" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="scheduledate" property="scheduledate" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    delete from t_screen_film
    where sfid = #{sfid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.shana.cinema.pojo.ScreenFilm">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
      <selectKey keyColumn="sfid" keyProperty="sfid" order="AFTER"
                 resultType="int">
        SELECT LAST_INSERT_ID()
      </selectKey>
    insert into t_screen_film (sfid, fid, sid, 
      price, nowprice, showtime, 
      endtime, status, description ,scheduledate
      )
    values (#{sfid,jdbcType=INTEGER}, #{fid,jdbcType=INTEGER}, #{sid,jdbcType=INTEGER}, 
      #{price,jdbcType=DOUBLE}, #{nowprice,jdbcType=DOUBLE}, #{showtime},
      #{endtime}, #{status,jdbcType=INTEGER}, #{description,jdbcType=VARCHAR}, #{scheduledate}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.shana.cinema.pojo.ScreenFilm">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    update t_screen_film
    set fid = #{fid,jdbcType=INTEGER},
      sid = #{sid,jdbcType=INTEGER},
      price = #{price,jdbcType=DOUBLE},
      nowprice = #{nowprice,jdbcType=DOUBLE},
      showtime = #{showtime},
      endtime = #{endtime},
      status = #{status,jdbcType=INTEGER},
      description = #{description,jdbcType=VARCHAR},
    scheduledate = #{scheduledate}
    where sfid = #{sfid,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    select sfid, fid, sid, price, nowprice, showtime, endtime, status, description
    from t_screen_film
    where sfid = #{sfid,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    select sfid, fid, sid, price, nowprice, showtime, endtime, status, description ï¼Œscheduledate
    from t_screen_film
  </select>

  <select id="selectScreenFilmByFidAndSid" resultType="com.shana.cinema.response.FilmScreen01">
    select * from t_screen_film sf,t_film f,t_screens s
      where  sf.sid = s.sid
      and sf.fid = f.fid
      and sf.fid = #{param1}
      and s.cbid = #{param2}
      ORDER BY sf.scheduledate,sf.showtime
  </select>

  <select id="selectScreenFilmByCbid" resultType="com.shana.cinema.response.FilmScreen01">
    select * from t_screens s,t_screen_film sf,t_film f
    where s.sid = sf.sid
    and sf.fid = f.fid
    and cbid = #{id}
  </select>

</mapper>