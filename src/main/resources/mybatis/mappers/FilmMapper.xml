<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itwn.cinema.mapper.FilmMapper">
  <resultMap id="BaseResultMap" type="com.itwn.cinema.pojo.Film">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    <id column="fid" jdbcType="INTEGER" property="fid" />
    <result column="fname" jdbcType="VARCHAR" property="fname" />
    <result column="releasedate" jdbcType="DATE" property="releasedate" />
    <result column="releasecountry" jdbcType="VARCHAR" property="releasecountry" />
    <result column="type" jdbcType="VARCHAR" property="type" />
    <result column="country" jdbcType="VARCHAR" property="country" />
    <result column="language" jdbcType="VARCHAR" property="language" />
    <result column="duration" jdbcType="VARCHAR" property="duration" />
    <result column="boxoffice" jdbcType="BIGINT" property="boxoffice" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="gradecount" jdbcType="BIGINT" property="gradecount" />
    <result column="score" jdbcType="DOUBLE" property="score" />
    <result column="director" jdbcType="VARCHAR" property="director" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="recommend" jdbcType="INTEGER" property="recommend" />
    <result column="filmimg" jdbcType="VARCHAR" property="filmimg" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    delete from t_film
    where fid = #{fid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.itwn.cinema.pojo.Film">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    insert into t_film (fid, fname, releasedate, 
      releasecountry, type, country, 
      language, duration, boxoffice, 
      description, gradecount, score, 
      director, status, recommend, filmimg)
    values (#{fid,jdbcType=INTEGER}, #{fname,jdbcType=VARCHAR}, #{releasedate,jdbcType=DATE}, 
      #{releasecountry,jdbcType=VARCHAR}, #{type,jdbcType=VARCHAR}, #{country,jdbcType=VARCHAR}, 
      #{language,jdbcType=VARCHAR}, #{duration,jdbcType=VARCHAR}, #{boxoffice,jdbcType=BIGINT}, 
      #{description,jdbcType=VARCHAR}, #{gradecount,jdbcType=BIGINT}, #{score,jdbcType=DOUBLE}, 
      #{director,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER},#{recommend,jdbcType=INTEGER},
      #{filmimg,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.itwn.cinema.pojo.Film">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    update t_film
    set fname = #{fname,jdbcType=VARCHAR},
      releasedate = #{releasedate,jdbcType=DATE},
      releasecountry = #{releasecountry,jdbcType=VARCHAR},
      type = #{type,jdbcType=VARCHAR},
      country = #{country,jdbcType=VARCHAR},
      language = #{language,jdbcType=VARCHAR},
      duration = #{duration,jdbcType=VARCHAR},
      boxoffice = #{boxoffice,jdbcType=BIGINT},
      description = #{description,jdbcType=VARCHAR},
      gradecount = #{gradecount,jdbcType=BIGINT},
      score = #{score,jdbcType=DOUBLE},
      director = #{director,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      recommend = #{recommend,jdbcType=INTEGER},
      filmimg = #{filmimg,jdbcType=VARCHAR}
    where fid = #{fid,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    select fid, fname, releasedate, releasecountry, type, country, language, duration, 
    boxoffice, description, gradecount, score, director, status
    from t_film
    where fid = #{fid,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 18 15:15:43 CST 2019.
    -->
    select fid, fname, releasedate, releasecountry, type, country, language, duration, 
    boxoffice, description, gradecount, score, director, status,filmimg
    from t_film
  </select>

<!--后台modify页面电影显示-->
  <select id="selectFilmByFnameAndReleasedateAndStatusAndrecommend" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status, recommend,filmimg
    from t_film f
    <where>
      <if test="qv!=null">
        <if test="qv.fname!=null and qv.fname.toString().trim()!=''">
            and f.fname like '%${qv.fname}%'
        </if>
        <if test="qv.releasedate!=null">
          and f.releasedate=#{qv.releasedate}
        </if>
        <if test="qv.status!=-1">
          and f.status=#{qv.status}
        </if>
        <if test="qv.recommend!=-1">
          and f.recommend=#{qv.recommend}
        </if>
      </if>
    </where>
  </select>


  <!--前端热门电影显示-->
  <select id="selectHotFilmByStatusAndRecommend" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status, recommend, filmimg
    from t_film
    where status=1 and recommend=1
    limit 0,12
  </select>

  <select id="selectByFilmLimit3" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status,filmimg
    from t_film
    <where>
      <if test="filmlimit3 != null">
        <if test="filmlimit3.type != null and filmlimit3.type.toString().trim()!=''">
          and type = '${filmlimit3.type}'
        </if>
        <if test="filmlimit3.country != null and filmlimit3.country.toString().trim()!=''">
          and country= #{filmlimit3.country}
        </if>
        <if test="filmlimit3.year != null and filmlimit3.year.toString().trim()!=''">
          and DATE_FORMAT(releasedate,"%Y")=#{filmlimit3.year}
        </if>
      </if>
      and status=1
    </where>
  </select>

  <!--前端即将上映电影显示-->
  <select id="selectCommingFilmByStatusAndRecommend" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status, recommend, filmimg
    from t_film
    where status=0 and recommend=2
    limit 0,12
  </select>

  <!--热播电影票房排行显示-->
  <select id="selectFilmOrderByBoxoffice" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status, recommend, filmimg
    from t_film
    where status=1 and recommend=1
    order by boxoffice DESC
    limit 0,10
  </select>

  <!--热播电影评分排行显示-->
  <select id="selectFilmOrderByScore" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status, recommend, filmimg
    from t_film
    where status=1 and recommend=1
    order by score DESC
    limit 0,10
  </select>

  <!--预播电影评论排行显示-->
  <select id="selectFilmOrderByGradecount" resultMap="BaseResultMap">
    select fid, fname, releasedate, releasecountry, type, country, language, duration,
    boxoffice, description, gradecount, score, director, status, recommend, filmimg
    from t_film
    where status=0 and recommend=2
    order by gradecount DESC
    limit 0,10
  </select>


  <!--后台modify查询数据条数-->
  <select id="selectcount"  resultType="java.lang.Integer">
    select count(*)
    from t_film f
  </select>


</mapper>

